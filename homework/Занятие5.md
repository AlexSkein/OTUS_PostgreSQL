# Отчет по домашке №5

1. развернуть виртуальную машину любым удобным способом
    Виртуалка на базе Альт 8 СП сервер
    2 ядра, 4GB  
1. поставить на неё PostgreSQL 15 любым способом
    **Установка стандартная**
    
    * Устанока
            ```apt-get install postgresql17-server  postgresql17-contrib```
    * Создание кластера 
            ```/etc/init.d/postgresql initdb```
    * Тестирование через pgbench при стандартных настройках

    ![pg](/img/5/1.jpg)
    
1. настроить кластер PostgreSQL 15 на максимальную производительность не обращая внимание на возможные проблемы с надежностью в случае аварийной перезагрузки виртуальной машины
    
    Настройки произведены с помощью pgtune

1. нагрузить кластер через утилиту через утилиту pgbench (https://postgrespro.ru/docs/postgrespro/14/pgbench)

    * Тестирование с новыми настройками

    ![pg](/img/5/2.jpg)

    *Прирост tps в 2 раза*

1. написать какого значения tps удалось достичь, показать какие параметры в какие значения устанавливали и почему

    Влияющие параметры видны из запроса

    ```SQL
        explain (analyse, settings)
        select * from pgbench_accounts where bid=1; 
    ```

    ![pg](/img/5/3.jpg)

    **work_memeffective_io_concurrency = '200', max_parallel_workers_per_gather = '0', random_page_cost = '1.1', effective_cache_size = '3GB**
    Установил параметры по рекомендации pgtune.